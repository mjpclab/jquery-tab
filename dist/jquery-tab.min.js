!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("jquery")):"function"==typeof define&&define.amd?define(["jquery"],t):e["jquery-tab"]=t(e.jQuery)}(this,function(k){"use strict";k=k&&k.hasOwnProperty("default")?k["default"]:k;var A={triggerEvents:"click",delayTriggerEvents:"",delayTriggerCancelEvents:"",delayTriggerLatency:200,statusFieldSelector:"",statusHashTemplate:"",statusHashSeparator:"&",fixedHeight:!1,mode:"horizontal",activeIndex:0,createEmptyTab:!1,fnShowPanelItem:function(e){return e&&e.show&&e.show()},fnHidePanelItem:function(e){return e&&e.hide&&e.hide()},onBeforeSwitch:undefined,onAfterSwitch:undefined,titleSelector:"h1,h2,h3,h4,h5,h6",fnGetTitleContent:function(e){return e.contents()},keepTitleVisible:!1,tabContainerTemplate:"<div></div>",tabContainerClass:"tab-container",labelContainerTemplate:"<div></div>",labelContainerClass:"label-container",showHeaderLabelContainer:!0,showFooterLabelContainer:!1,labelItemTemplate:"<label></label>",labelItemClass:"label-item",panelContainerTemplate:"<div></div>",panelContainerClass:"panel-container",panelItemTemplate:"<div></div>",panelItemClass:"panel-item"};function L(e){for(var t,n=e;(t=n.children()).length;)n=t;return n.eq(0)}function b(e){var t=k(e.labelContainerTemplate).addClass(e.labelContainerClass).attr("role","tablist");return"vertical"===e.mode&&t.attr("aria-orientation","vertical"),{$labelContainer:t,$labelContainerLeaf:L(t)}}function B(e){var t=k(e.tabContainerTemplate).addClass(e.tabContainerClass);"horizontal"===e.mode?t.addClass(e.horizontalTabContainerClass):"vertical"===e.mode&&t.addClass(e.verticalTabContainerClass);var n=function u(e){var t,n;if(e.showHeaderLabelContainer){var a=b(e),r=a.$labelContainer,i=a.$labelContainerLeaf;r.addClass(e.headerLabelContainerClass),t=r,n=i}return{$headerLabelContainer:t,$headerLabelContainerLeaf:n}}(e),a=n.$headerLabelContainer,r=n.$headerLabelContainerLeaf;a&&t.append(a);var i=function f(e){var t=k(e.panelContainerTemplate).addClass(e.panelContainerClass);return{$panelContainer:t,$panelContainerLeaf:L(t)}}(e),o=i.$panelContainer,l=i.$panelContainerLeaf;t.append(o);var d=function C(e){var t,n;if(e.showFooterLabelContainer){var a=b(e),r=a.$labelContainer,i=a.$labelContainerLeaf;r.addClass(e.footerLabelContainerClass),t=r,n=i}return{$footerLabelContainer:t,$footerLabelContainerLeaf:n}}(e),c=d.$footerLabelContainer,s=d.$footerLabelContainerLeaf;return c&&t.append(c),{$tabContainer:t,$headerLabelContainer:a,$headerLabelContainerLeaf:r,$panelContainer:o,$panelContainerLeaf:l,$footerLabelContainer:c,$footerLabelContainerLeaf:s}}var G="#",O=/[.?*+\\\(\)\[\]\{\}]/g;function R(e,t,n,a){var r=function p(e,t){var n=k(t.labelItemTemplate).addClass(t.labelItemClass).addClass(t.inactiveLabelItemClass).attr("role","tab"),a=L(n);return a.empty().append(e),{$labelItem:n,$labelItemLeaf:a}}(e,a),i=r.$labelItem,o=r.$labelItemLeaf,l=function I(e,t){var n=k(t.panelItemTemplate).addClass(t.panelItemClass).addClass(t.inactivePanelItemClass).attr("role","tabpanel"),a=L(n);return a.append(e),{$panelItem:n,$panelItemLeaf:a}}(t,a),d=l.$panelItem,c=l.$panelItemLeaf,s=n.containerId,u=n.nextItemId;n.nextItemId++;var f=0,C="__jquery-tab-label__".concat(s,"__").concat(u),b="__jquery-tab-panel__".concat(s,"__").concat(u),m="".concat(C,"__").concat(f),h=b,v=function v(){var e="".concat(C,"__").concat(f++);return e===m?i:i.clone().attr("id",e)};return i.attr("id",m).attr("aria-controls",b),d.attr("id",h).attr("aria-labelledby",m),{$labelItem:i,$labelItemLeaf:o,$panelItem:d,$panelItemLeaf:c,cloneLabelItem:v}}var V=0;function a(e,t){var n=e.data(),a=function _(e,t,n){var a=k.extend({},e,t,n),r=a.tabContainerClass,i=a.labelContainerClass,o=a.labelItemClass,l=a.panelItemClass;return k.extend(a,{horizontalTabContainerClass:r+"-horizontal",verticalTabContainerClass:r+"-vertical",headerLabelContainerClass:i+"-header",footerLabelContainerClass:i+"-footer",activeLabelItemClass:o+"-active",inactiveLabelItemClass:o+"-inactive",activePanelItemClass:l+"-active",inactivePanelItemClass:l+"-inactive"})}(A,n,t),r={containerId:V++,nextItemId:0,itemCount:0,currentIndex:-1},i=k.extend({$region:e},B(a)),o=i.$tabContainer,l=function F(e,t){var n=e.$headerLabelContainerLeaf,a=e.$footerLabelContainerLeaf,r=e.$panelContainerLeaf,i=function i(e,t){if(!isFinite(t))throw new Error("invalid index");return e.children(":eq("+t+")")},o=function o(e){return n?i(n,e):k([])},l=function l(e){return a?i(a,e):k([])},d=function d(e){return o(e).add(l(e))};return{getCount:function c(){return t.itemCount},getCurrentIndex:function s(){return t.currentIndex},getLabel:i,getHeaderLabel:o,getFooterLabel:l,getHeaderFooterLabels:d,getPanel:function u(e){if(!isFinite(e))throw new Error("invalid index");return r.children(":eq("+e+")")}}}(i,r),d=l.getCount,c=l.getCurrentIndex,s=(l.getLabel,l.getHeaderLabel),u=l.getFooterLabel,f=l.getHeaderFooterLabels,C=l.getPanel,b=function q(e,t,n){var a,r,i=e.$region,o=e.$tabContainer,l=n.statusFieldSelector,d=n.statusHashTemplate,c=n.statusHashSeparator,s=n.fnSaveIndex,u=n.fnLoadIndex,f=n.activeIndex,C=i.find(l);C.length||(C=k(l)),d&&(a=new RegExp(d.replace(O,"\\$&")+"-?\\d+"),r=new RegExp(d.replace(O,"\\$&")+"(-?\\d+)"));var b=function b(){var e=location.hash.match(r);return e&&e[1]?parseInt(e[1]):-1};return{saveIndex:function m(e){if(C.val(e),d){var t=location.hash,n=d+e;-1<t.indexOf(d)?t=t.replace(a,n):(t!==G&&(t.length?t+=c:t=G),t+=n),location.replace(t)}s&&s.call(o,e)},loadIndex:function h(){var e=t.itemCount,n=-1;return 0===e||(C.each(function(){var e=k(this).val();if("number"==typeof e)return n=e,!1;if(e.length){var t=parseInt(e);if(isFinite(t)&&!isNaN(t))return n=parseInt(e),!1}}),(-1===n||isNaN(n))&&d&&(n=b()),(-1===n||isNaN(n))&&u&&(n=parseInt(u.call(o))),(-1===n||isNaN(n))&&(n=Number(f)||0),n<0?n=0:e<=n&&(n=e-1)),n},parseHashIndex:b}}(i,r,a),m=b.saveIndex,h=b.loadIndex,v=b.parseHashIndex,p=function E(o,d,t,c,s,u){var f=function f(e){var t=c.$tabContainer,n=s.currentIndex;"function"==typeof u.onBeforeSwitch&&u.onBeforeSwitch.call(t,n,e);var a=o(e),r=d(e),i=r.siblings();!function l(e,t,n){var a=n.activeLabelItemClass,r=n.inactiveLabelItemClass,i=n.activePanelItemClass,o=n.inactivePanelItemClass;e.removeClass(r).addClass(a).attr("aria-selected","true").attr("aria-expanded","true"),e.siblings().removeClass(a).addClass(r).attr("aria-selected","false").attr("aria-expanded","false"),t.removeClass(o).addClass(i).attr("aria-hidden","false"),t.siblings().removeClass(i).addClass(o).attr("aria-hidden","true")}(a,r,u),"function"==typeof u.fnHidePanelItem&&u.fnHidePanelItem.call(i,i),"function"==typeof u.fnShowPanelItem&&u.fnShowPanelItem.call(r,r),s.currentIndex=e,"function"==typeof u.onAfterSwitch&&u.onAfterSwitch.call(t,n,e)},n=function n(e){f(e),t(e)};return{switchToWithoutSave:f,switchTo:n}}(f,C,m,i,r,a),I=p.switchToWithoutSave,L=p.switchTo,g=function N(a,r,c,i,s,u,f){var C=function C(e,t,n){var a=s.$headerLabelContainerLeaf,r=s.$footerLabelContainerLeaf,i=s.$panelContainerLeaf,o=R(e,t,u,f),l=o.$panelItem,d=o.cloneLabelItem;-1<u.currentIndex&&"function"==typeof f.fnHidePanelItem&&f.fnHidePanelItem.call(l,l),n<0&&(n=0),0<u.itemCount&&n<u.itemCount?(a&&a.children(":eq("+n+")").before(d()),r&&r.children(":eq("+n+")").before(d()),i.children(":eq("+n+")").before(l),n<=u.currentIndex&&c(++u.currentIndex)):(a&&a.append(d()),r&&r.append(d()),i.append(l)),u.itemCount++},o=function o(e,t,n){C(e,t,n),-1===u.currentIndex&&u.itemCount&&i(0)},n=function n(e,t){C(e,t,u.itemCount)},l=function l(e,t){n(e,t),-1===u.currentIndex&&u.itemCount&&i(0)},d=function d(e,t){for(var n=k(e),a=0;;){var r=n.find(f.titleSelector).first();if(0===r.length)break;f.keepTitleVisible||r.hide();var i=f.fnGetTitleContent.call(r,r),o=r.add(r.nextUntil(f.titleSelector));C(i,o,t+a),a++}},t=function t(e){d(e,u.itemCount)};return{insertTabItemWithoutSwitch:C,insertTabItem:o,addTabItemWithoutSwitch:n,addTabItem:l,insert:function b(e,t){d(e,t),-1===u.currentIndex&&u.itemCount&&i(0)},insertWithoutSwitch:d,add:function m(e){t(e),-1===u.currentIndex&&u.itemCount&&i(0)},addWithoutSwitch:t,remove:function h(e){if(!(e===undefined||!isFinite(e)||e<0||e>=u.itemCount)){var t=a(e),n=r(e);return t.remove(),n.remove(),u.itemCount--,e<u.currentIndex?c(--u.currentIndex):e===u.currentIndex&&(u.currentIndex===u.itemCount?i(u.currentIndex-1):i(u.currentIndex)),n}}}}(f,C,m,L,i,r,a),x=g.addTabItem,$=g.insertTabItem,T=g.add,w=g.addWithoutSwitch,y=g.insert,H=g.remove;if(w(e),r.itemCount||a.createEmptyTab){e.append(o);var S=function j(e,t){return function(){if(t.fixedHeight){var a=0;e.$panelContainerLeaf.children().each(function(e,t){var n=t.scrollHeight;a<n&&(a=n)}).height(a)}}}(i,a);S(),I(h()),function W(t,n,a,e){e.statusHashTemplate&&window&&k(window).on("hashchange",function(){var e=t();-1<e&&e!==a.currentIndex&&n(e)})}(v,L,r,a),function z(n,e,a,t){var r,i=t.triggerEvents,o=t.delayTriggerEvents,l=t.delayTriggerCancelEvents,d=t.delayTriggerLatency,c=e.$headerLabelContainerLeaf,s=e.$footerLabelContainerLeaf,u=function u(e){r=setTimeout(function(){n(e),r=undefined},d)},f=function f(){r&&(clearTimeout(r),r=undefined)},C=function C(e){if(e.currentTarget.parentNode===e.delegateTarget){f();var t=k(e.currentTarget).index();t!==a.currentIndex&&u(t)}},b=function b(e){e.currentTarget.parentNode===e.delegateTarget&&k(e.currentTarget).index()!==a.currentIndex&&f()};o&&(c&&c.on(o,"*",C),s&&s.on(o,"*",C),l&&(c&&c.on(l,"*",b),s&&s.on(l,"*",b)));var m=function m(e){if(e.currentTarget.parentNode===e.delegateTarget){f();var t=k(e.currentTarget).index();t!==a.currentIndex&&n(t)}};i&&(c&&c.on(i,"*",m),s&&s.on(i,"*",m))}(L,i,r,a);var P={getCount:d,getCurrentIndex:c,getHeaderLabel:s,getFooterLabel:u,getHeaderFooterLabels:f,getPanel:C,updateFixedHeight:S,switchTo:L,addTabItem:x,insertTabItem:$,add:T,insert:y,remove:H};e.data("tab-controller",P),o.data("tab-controller",P)}}return k.fn.tab=function(n){return this.each(function(e,t){a(k(t),n)}),this},function e(){k(".tab-region").tab()}(),k});
