!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("jquery")):"function"==typeof define&&define.amd?define(["jquery"],t):e["jquery-tab"]=t(e.jQuery)}(this,function(U){"use strict";U=U&&U.hasOwnProperty("default")?U["default"]:U;var D={triggerEvents:"click",delayTriggerEvents:"",delayTriggerCancelEvents:"",delayTriggerLatency:200,statusFieldSelector:"",statusHashTemplate:"",statusHashSeparator:"&",fixedHeight:!1,mode:"horizontal",activePosition:0,createEmptyTab:!1,fnShowPanelItem:function(e){return e&&e.show&&e.show()},fnHidePanelItem:function(e){return e&&e.hide&&e.hide()},onBeforeSwitch:undefined,onAfterSwitch:undefined,titleSelector:"h1,h2,h3,h4,h5,h6",fnGetTitleContent:function(e){return e.contents()},keepTitleVisible:!1,fnGetName:function(e){return e.attr("data-tab-item-name")},tabContainerTemplate:"<div></div>",tabContainerClass:"tab-container",labelContainerTemplate:"<div></div>",labelContainerClass:"label-container",showHeaderLabelContainer:!0,showFooterLabelContainer:!1,labelItemTemplate:"<label></label>",labelItemClass:"label-item",panelContainerTemplate:"<div></div>",panelContainerClass:"panel-container",panelItemTemplate:"<div></div>",panelItemClass:"panel-item"};function L(e){for(var t,n=e;(t=n.children()).length;)n=t;return n.eq(0)}function m(e){var t=U(e.labelContainerTemplate).addClass(e.labelContainerClass).attr("role","tablist");return"vertical"===e.mode&&t.attr("aria-orientation","vertical"),{$labelContainer:t,$labelContainerLeaf:L(t)}}function J(e){var t=U(e.tabContainerTemplate).addClass(e.tabContainerClass);"horizontal"===e.mode?t.addClass(e.horizontalTabContainerClass):"vertical"===e.mode&&t.addClass(e.verticalTabContainerClass);var n=function s(e){var t,n;if(e.showHeaderLabelContainer){var a=m(e),r=a.$labelContainer,i=a.$labelContainerLeaf;r.addClass(e.headerLabelContainerClass),t=r,n=i}return{$headerLabelContainer:t,$headerLabelContainerLeaf:n}}(e),a=n.$headerLabelContainer,r=n.$headerLabelContainerLeaf;a&&t.append(a);var i=function f(e){var t=U(e.panelContainerTemplate).addClass(e.panelContainerClass);return{$panelContainer:t,$panelContainerLeaf:L(t)}}(e),o=i.$panelContainer,l=i.$panelContainerLeaf;t.append(o);var d=function C(e){var t,n;if(e.showFooterLabelContainer){var a=m(e),r=a.$labelContainer,i=a.$labelContainerLeaf;r.addClass(e.footerLabelContainerClass),t=r,n=i}return{$footerLabelContainer:t,$footerLabelContainerLeaf:n}}(e),u=d.$footerLabelContainer,c=d.$footerLabelContainerLeaf;return u&&t.append(u),{$tabContainer:t,$headerLabelContainer:a,$headerLabelContainerLeaf:r,$panelContainer:o,$panelContainerLeaf:l,$footerLabelContainer:u,$footerLabelContainerLeaf:c}}var K="#",M=/[.?*+\\\(\)\[\]\{\}]/g;function X(e){return-1!==e&&e!==undefined&&null!==e&&""!==e}function Y(e,t,n,a,r){var i=function I(e,t){var n=U(t.labelItemTemplate).addClass(t.labelItemClass).addClass(t.inactiveLabelItemClass).attr("role","tab"),a=L(n);return a.empty().append(e),{$labelItem:n,$labelItemLeaf:a}}(e,r),o=i.$labelItem,l=i.$labelItemLeaf,d=function g(e,t){var n=U(t.panelItemTemplate).addClass(t.panelItemClass).addClass(t.inactivePanelItemClass).attr("role","tabpanel"),a=L(n);return a.append(e),{$panelItem:n,$panelItemLeaf:a}}(t,r),u=d.$panelItem,c=d.$panelItemLeaf;n&&(o.attr("data-tab-item-name",n),u.attr("data-tab-item-name",n));var s=a.containerId,f=a.nextItemId;a.nextItemId++;var C=0,m="__jquery-tab-label__".concat(s,"__").concat(f),b="__jquery-tab-panel__".concat(s,"__").concat(f),v="".concat(m,"__").concat(C),h=b,p=function p(){var e="".concat(m,"__").concat(C++);return e===v?o:o.clone().attr("id",e)};return o.attr("id",v).attr("aria-controls",b),u.attr("id",h).attr("aria-labelledby",v),{$labelItem:o,$labelItemLeaf:l,$panelItem:u,$panelItemLeaf:c,cloneLabelItem:p}}var Z=0;function a(e,t){var n=e.data(),a=function z(e,t,n){var a=U.extend({},e,t,n),r=a.tabContainerClass,i=a.labelContainerClass,o=a.labelItemClass,l=a.panelItemClass;return U.extend(a,{horizontalTabContainerClass:r+"-horizontal",verticalTabContainerClass:r+"-vertical",headerLabelContainerClass:i+"-header",footerLabelContainerClass:i+"-footer",activeLabelItemClass:o+"-active",inactiveLabelItemClass:o+"-inactive",activePanelItemClass:l+"-active",inactivePanelItemClass:l+"-inactive"})}(D,n,t),r={containerId:Z++,nextItemId:0,itemCount:0,currentIndex:-1},i=U.extend({$region:e},J(a)),o=i.$tabContainer,l=function k(e,t){var n=e.$headerLabelContainerLeaf,a=e.$footerLabelContainerLeaf,i=e.$panelContainer,r=e.$panelContainerLeaf,o=function o(e){return r.children().eq(e).attr("data-tab-item-name")},l=function l(a){var r=-1;return i.children().each(function(e,t){var n=U(t);if(n.attr("data-tab-item-name")===a)return r=n.index(),!1}),r},d=function d(e){return"number"==typeof e?e:isFinite(e)?parseInt(e):e!==undefined?l(e):-1},u=function u(e){if("number"==typeof e)return{index:e,name:o(e)};if(isFinite(e)){var t=parseInt(e);return{index:t,name:o(t)}}return e?{index:l(e),name:e}:{index:-1,name:undefined}},c=function c(e){if(n){var t=d(e);return n.children().eq(t)}return U([])},s=function s(e){if(a){var t=d(e);return a.children().eq(t)}return U([])},f=function f(e){var t=d(e);return c(t).add(s(t))},C=function C(e){var t=d(e);return r.children().eq(t)},m=function m(){return c(t.currentIndex)},b=function b(){return s(t.currentIndex)},v=function v(){return f(t.currentIndex)},h=function h(){return C(t.currentIndex)};return{getCount:function p(){return t.itemCount},getCurrentIndex:function I(){return t.currentIndex},getIndexByName:l,positionToIndex:d,parsePosition:u,getHeaderLabel:c,getFooterLabel:s,getHeaderFooterLabels:f,getPanel:C,getCurrentHeaderLabel:m,getCurrentFooterLabel:b,getCurrentHeaderFooterLabels:v,getCurrentPanel:h,getName:o}}(i,r),d=l.getCount,u=l.getCurrentIndex,c=l.getIndexByName,s=l.positionToIndex,f=l.parsePosition,C=l.getHeaderLabel,m=l.getFooterLabel,b=l.getHeaderFooterLabels,v=l.getPanel,h=l.getCurrentHeaderLabel,p=l.getCurrentFooterLabel,I=l.getCurrentHeaderFooterLabels,g=l.getCurrentPanel,L=l.getName,x=function G(e,t,n){var a,r=e.$region,i=e.$tabContainer,o=n.statusFieldSelector,l=n.statusHashTemplate,d=n.statusHashSeparator,u=n.fnSavePosition,c=n.fnLoadPosition,s=n.activePosition,f=r.find(o);f.length||(f=U(o)),l&&(a=new RegExp(l.replace(M,"\\$&")+"([-\\w]+)"));var C=function C(){var e=location.hash.match(a);return e&&e[1]?parseInt(e[1]):-1};return{savePosition:function(e){if(f.val(e),l){var t=location.hash,n=l+e;-1<t.indexOf(l)?t=t.replace(a,n):(t!==K&&(t.length?t+=d:t=K),t+=n),location.replace(t)}u&&u.call(i,e)},loadPosition:function m(){var t=-1;return f.each(function(){var e=U(this).val();if("number"==typeof e||e.length)return t=e,!1}),X(t)?t:l&&X(t=C())?t:c&&X(t=c.call(i))?t:X(s)?s:0},parseHashPosition:C}}(i,0,a),T=x.savePosition,$=x.loadPosition,y=x.parseHashPosition,w=function A(s,f,C,r,m,b,v){var h=function h(e){var t=s(e),n=t.index,a=t.name;if(!(n<0||n>=b.itemCount)){var r=b.currentIndex,i=b.currentName,o=m.$tabContainer;"function"==typeof v.onBeforeSwitch&&v.onBeforeSwitch.call(o,{index:r,name:i},{index:n,name:a});var l=f(n),d=C(n),u=d.siblings();return function c(e,t,n){var a=n.activeLabelItemClass,r=n.inactiveLabelItemClass,i=n.activePanelItemClass,o=n.inactivePanelItemClass;e.removeClass(r).addClass(a).attr("aria-selected","true").attr("aria-expanded","true"),e.siblings().removeClass(a).addClass(r).attr("aria-selected","false").attr("aria-expanded","false"),t.removeClass(o).addClass(i).attr("aria-hidden","false"),t.siblings().removeClass(i).addClass(o).attr("aria-hidden","true")}(l,d,v),"function"==typeof v.fnHidePanelItem&&v.fnHidePanelItem.call(u,u),"function"==typeof v.fnShowPanelItem&&v.fnShowPanelItem.call(d,d),b.currentIndex=n,b.currentName=a,"function"==typeof v.onAfterSwitch&&v.onAfterSwitch.call(o,{index:r,name:i},{index:n,name:a}),{index:n,name:a}}},i=function i(e){var t=h(e);if(t){var n=t.index,a=t.name;r(a||n)}};return{switchToWithoutSave:h,switchTo:i}}(f,b,v,T,i,r,a),P=w.switchToWithoutSave,H=w.switchTo,S=function O(m,r,i,s,o,f,C,b){var v=function v(e,t,n,a){var r=f.$headerLabelContainerLeaf,i=f.$footerLabelContainerLeaf,o=f.$panelContainerLeaf,l=Y(e,t,n,C,b),d=l.$panelItem,u=l.cloneLabelItem;-1<C.currentIndex&&"function"==typeof b.fnHidePanelItem&&b.fnHidePanelItem.call(d,d);var c=m(a);c<0&&(c=0),0<C.itemCount&&c<C.itemCount?(r&&r.children().eq(c).before(u()),i&&i.children().eq(c).before(u()),o.children().eq(c).before(d),c<=C.currentIndex&&(C.currentIndex++,s(n||C.currentIndex))):(r&&r.append(u()),i&&i.append(u()),o.append(d)),C.itemCount++},l=function l(e,t,n,a){v(e,t,n,a),-1===C.currentIndex&&C.itemCount&&o(0)},a=function a(e,t,n){v(e,t,n,C.itemCount)},d=function d(e,t,n){a(e,t,n),-1===C.currentIndex&&C.itemCount&&o(0)},h=function h(e,t){for(var n=b.titleSelector,a=b.fnGetTitleContent,r=b.keepTitleVisible,i=b.fnGetName,o=U(e),l=0,d=m(t);;){var u=o.find(n).first();if(0===u.length)break;r||u.hide();var c=u.nextUntil(n),s=a.call(u,u),f=U([]).add(u).add(c),C=i.call(o,u,c);v(s,f,C,d+l),l++}},t=function t(e){h(e,C.itemCount)};return{insertTabItemWithoutSwitch:v,insertTabItem:l,addTabItemWithoutSwitch:a,addTabItem:d,insert:function n(e,t){h(e,t),-1===C.currentIndex&&C.itemCount&&o(0)},insertWithoutSwitch:h,add:function u(e){t(e),-1===C.currentIndex&&C.itemCount&&o(0)},addWithoutSwitch:t,remove:function c(e){var t=m(e);if(!(t<0||t>=C.itemCount)){var n=r(t),a=i(t);return n.remove(),a.remove(),C.itemCount--,0===C.itemCount?(C.currentIndex=-1,C.currentName=undefined):t<C.currentIndex?o(C.currentIndex-1):t===C.currentIndex&&(t===C.itemCount?o(C.currentIndex-1):o(C.currentIndex)),a}}}}(s,b,v,T,H,i,r,a),F=S.addTabItem,_=S.insertTabItem,q=S.add,N=S.addWithoutSwitch,E=S.insert,j=S.remove;if(N(e),r.itemCount||a.createEmptyTab){e.append(o);var W=function V(e,t){return function(){if(t.fixedHeight){var a=0;e.$panelContainerLeaf.children().each(function(e,t){var n=t.scrollHeight;a<n&&(a=n)}).height(a)}}}(i,a);W(),P($()),function Q(t,n,a,e){e.statusHashTemplate&&window&&U(window).on("hashchange",function(){var e=t();-1<e&&e!==a.currentIndex&&n(e)})}(y,H,r,a),function R(r,e,i,t){var n,a=t.triggerEvents,o=t.delayTriggerEvents,l=t.delayTriggerCancelEvents,d=t.delayTriggerLatency,u=e.$headerLabelContainerLeaf,c=e.$footerLabelContainerLeaf,s=function s(e){n=setTimeout(function(){r(e),n=undefined},d)},f=function f(){n&&(clearTimeout(n),n=undefined)},C=function C(e){if(e.currentTarget.parentNode===e.delegateTarget){f();var t=U(e.currentTarget),n=t.index();if(n!==i.currentIndex){var a=t.attr("data-tab-item-name");s(a||n)}}},m=function m(e){e.currentTarget.parentNode===e.delegateTarget&&U(e.currentTarget).index()!==i.currentIndex&&f()};o&&(u&&u.on(o,"*",C),c&&c.on(o,"*",C),l&&(u&&u.on(l,"*",m),c&&c.on(l,"*",m)));var b=function b(e){if(e.currentTarget.parentNode===e.delegateTarget){f();var t=U(e.currentTarget),n=t.index();if(n!==i.currentIndex){var a=t.attr("data-tab-item-name");r(a||n)}}};a&&(u&&u.on(a,"*",b),c&&c.on(a,"*",b))}(H,i,r,a);var B={getCount:d,getCurrentIndex:u,getIndexByName:c,getHeaderLabel:C,getFooterLabel:m,getHeaderFooterLabels:b,getPanel:v,getCurrentHeaderLabel:h,getCurrentFooterLabel:p,getCurrentHeaderFooterLabels:I,getCurrentPanel:g,getName:L,updateFixedHeight:W,switchTo:H,addTabItem:F,insertTabItem:_,add:q,insert:E,remove:j};e.data("tab-controller",B),o.data("tab-controller",B)}}return U.fn.tab=function(n){return this.each(function(e,t){a(U(t),n)}),this},function e(){U(".tab-region").tab()}(),U});
