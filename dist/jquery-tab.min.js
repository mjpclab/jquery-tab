!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("jquery")):"function"==typeof define&&define.amd?define(["jquery"],t):e["jquery-tab"]=t(e.jQuery)}(this,function(O){"use strict";O=O&&O.hasOwnProperty("default")?O.default:O;var R={triggerEvents:"click",delayTriggerEvents:"",delayTriggerCancelEvents:"",delayTriggerLatency:200,statusFieldSelector:"",statusHashTemplate:"",statusHashSeparator:"&",fixedHeight:!1,mode:"horizontal",activeIndex:0,createEmptyTab:!1,fnShowPanelItem:function(e){return e&&e.show&&e.show()},fnHidePanelItem:function(e){return e&&e.hide&&e.hide()},onBeforeSwitch:void 0,onAfterSwitch:void 0,titleSelector:"h1,h2,h3,h4,h5,h6",fnGetTitleContent:function(e){return e.contents()},keepTitleVisible:!1,tabContainerTemplate:"<div></div>",tabContainerClass:"tab-container",labelContainerTemplate:"<div></div>",labelContainerClass:"label-container",showHeaderLabelContainer:!0,showFooterLabelContainer:!1,headerLabelContainerClass:"header-container",footerLabelContainerClass:"footer-container",labelItemTemplate:"<label></label>",labelItemClass:"label-item",labelItemActiveClass:"label-active",labelItemInactiveClass:"label-inactive",panelContainerTemplate:"<div></div>",panelContainerClass:"panel-container",panelItemTemplate:"<div></div>",panelItemClass:"panel-item",panelItemActiveClass:"panel-active",panelItemInactiveClass:"panel-inactive"};function y(e){for(var t,a=e;(t=a.children()).length;)a=t;return a.eq(0)}function C(e){var t=O(e.labelContainerTemplate).addClass(e.labelContainerClass).attr("role","tablist");return"vertical"===e.mode&&t.attr("aria-orientation","vertical"),{$labelContainer:t,$labelContainerLeaf:y(t)}}function V(e){var t=O(e.tabContainerTemplate).addClass(e.tabContainerClass);"horizontal"===e.mode?t.addClass(e.tabContainerClass+"-horizontal"):"vertical"===e.mode&&t.addClass(e.tabContainerClass+"-vertical");var a=function(e){var t,a;if(e.showHeaderLabelContainer){var n=C(e),r=n.$labelContainer,i=n.$labelContainerLeaf;i.addClass(e.headerLabelContainerClass),t=r,a=i}return{$headerLabelContainer:t,$headerLabelContainerLeaf:a}}(e),n=a.$headerLabelContainer,r=a.$headerLabelContainerLeaf;n&&t.append(n);var i,l,o={$panelContainer:l=O((i=e).panelContainerTemplate).addClass(i.panelContainerClass),$panelContainerLeaf:y(l)},d=o.$panelContainer,s=o.$panelContainerLeaf;t.append(d);var c=function(e){var t,a;if(e.showFooterLabelContainer){var n=C(e),r=n.$labelContainer,i=n.$labelContainerLeaf;i.addClass(e.footerLabelContainerClass),t=r,a=i}return{$footerLabelContainer:t,$footerLabelContainerLeaf:a}}(e),u=c.$footerLabelContainer,f=c.$footerLabelContainerLeaf;return u&&t.append(u),{$tabContainer:t,$headerLabelContainer:n,$headerLabelContainerLeaf:r,$panelContainer:d,$panelContainerLeaf:s,$footerLabelContainer:u,$footerLabelContainerLeaf:f}}function Q(e,t,a,n){var r,i,l,o,d,s,c,u,f=(r=e,l=O((i=n).labelItemTemplate).addClass(i.labelItemClass).addClass(i.labelItemInactiveClass).attr("role","tab"),(o=y(l)).empty().append(r),{$labelItem:l,$labelItemLeaf:o}),C=f.$labelItem,b=f.$labelItemLeaf,p=(d=t,c=O((s=n).panelItemTemplate).addClass(s.panelItemClass).addClass(s.panelItemInactiveClass).attr("role","tabpanel"),(u=y(c)).append(d),{$panelItem:c,$panelItemLeaf:u}),m=p.$panelItem,v=p.$panelItemLeaf,I=a.containerId,h=a.nextItemId;a.nextItemId++;var g=0,L="__jquery-tab-label__".concat(I,"__").concat(h),x="__jquery-tab-panel__".concat(I,"__").concat(h),$="".concat(L,"__").concat(g),T=x;return C.attr("id",$).attr("aria-controls",x),m.attr("id",T).attr("aria-labelledby",$),{$labelItem:C,$labelItemLeaf:b,$panelItem:m,$panelItemLeaf:v,cloneLabelItem:function(){var e="".concat(L,"__").concat(g++);return e===$?C:C.clone().attr("id",e)}}}var U=/[.?*+\\\(\)\[\]\{\}]/g;var D=0;function n(e,t){var a,n,r,i,l,o,d,s,c=e.data(),f=O.extend({},R,c,t),C={containerId:D++,nextItemId:0,itemCount:0,currentIndex:-1},u=O.extend({$region:e},V(f)),b=u.$tabContainer,p=u.$headerLabelContainerLeaf,m=u.$panelContainerLeaf,v=u.$footerLabelContainerLeaf,I=(n=C,r=(a=u).$headerLabelContainerLeaf,i=a.$footerLabelContainerLeaf,l=a.$panelContainerLeaf,d=function(e){return r?o(r,e):O([])},s=function(e){return i?o(i,e):O([])},{getCount:function(){return n.itemCount},getCurrentIndex:function(){return n.currentIndex},getLabel:o=function(e,t){if(!isFinite(t))throw new Error("invalid index");return e.children(":eq("+t+")")},getHeaderLabel:d,getFooterLabel:s,getHeaderFooterLabels:function(e){return d(e).add(s(e))},getPanel:function(e){if(!isFinite(e))throw new Error("invalid index");return l.children(":eq("+e+")")}}),h=I.getCount,g=I.getCurrentIndex,L=I.getHeaderLabel,x=I.getFooterLabel,$=I.getHeaderFooterLabels,T=I.getPanel,y=function(e,t,a){var n,r,i=e.$region,l=e.$tabContainer,o=a.statusFieldSelector,d=a.statusHashTemplate,s=a.statusHashSeparator,c=a.fnSaveIndex,u=a.fnLoadIndex,f=a.activeIndex,C=i.find(o);C.length||(C=O(o)),d&&(n=new RegExp(d.replace(U,"\\$&")+"-?\\d+"),r=new RegExp(d.replace(U,"\\$&")+"(-?\\d+)"));var b=function(){var e=location.hash.match(r);return e&&e[1]?parseInt(e[1]):-1};return{saveIndex:function(e){if(C.val(e),d){var t=location.hash,a=d+e;-1<t.indexOf(d)?t=t.replace(n,a):(t.length&&(t+=s),t+=a),location.hash=t}c&&c.call(l,e)},loadIndex:function(){var e=t.itemCount,a=-1;return 0===e||(C.each(function(){var e=O(this).val();if("number"==typeof e)return a=e,!1;if(e.length){var t=parseInt(e);if(isFinite(t)&&!isNaN(t))return a=parseInt(e),!1}}),(-1===a||isNaN(a))&&d&&(a=b()),(-1===a||isNaN(a))&&u&&(a=parseInt(u.call(l))),(-1===a||isNaN(a))&&(a=Number(f)||0),a<0?a=0:e<=a&&(a=e-1)),a},parseHashIndex:b}}(u,C,f),w=y.saveIndex,H=y.loadIndex,E=y.parseHashIndex,S=function(e){var t=C.currentIndex;"function"==typeof f.onBeforeSwitch&&f.onBeforeSwitch.call(b,t,e);var a,n,r,i,l,o,d,s=$(e),c=T(e),u=c.siblings();a=s,n=c,i=(r=f).labelItemActiveClass,l=r.labelItemInactiveClass,o=r.panelItemActiveClass,d=r.panelItemInactiveClass,a.addClass(i).removeClass(l).attr("aria-selected","true").attr("aria-expanded","true"),a.siblings().removeClass(i).addClass(l).attr("aria-selected","false").attr("aria-expanded","false"),n.addClass(o).removeClass(d).attr("aria-hidden","false"),n.siblings().removeClass(o).addClass(d).attr("aria-hidden","true"),"function"==typeof f.fnHidePanelItem&&f.fnHidePanelItem.call(u,u),"function"==typeof f.fnShowPanelItem&&f.fnShowPanelItem.call(c,c),C.currentIndex=e,"function"==typeof f.onAfterSwitch&&f.onAfterSwitch.call(b,t,e)},_=function(e){S(e),w(e)},F=function(e,t,a){var n=Q(e,t,C,f),r=n.$panelItem,i=n.cloneLabelItem;-1<C.currentIndex&&"function"==typeof f.fnHidePanelItem&&f.fnHidePanelItem.call(r,r),a<0&&(a=0),0<C.itemCount&&a<C.itemCount?(p&&p.children(":eq("+a+")").before(i()),v&&v.children(":eq("+a+")").before(i()),m.children(":eq("+a+")").before(r),a<=C.currentIndex&&w(++C.currentIndex)):(p&&p.append(i()),v&&v.append(i()),m.append(r)),C.itemCount++},q=function(e,t){for(var a=O(e),n=0;;){var r=a.find(f.titleSelector).first();if(0===r.length)break;f.keepTitleVisible||r.hide();var i=f.fnGetTitleContent.call(r,r),l=r.add(r.nextUntil(f.titleSelector));F(i,l,t+n),n++}},N=function(e){q(e,C.itemCount)};if(N(e),C.itemCount||f.createEmptyTab){e.append(b);var P,j=function(){if(f.fixedHeight){var t=0;m.children().each(function(){var e=O(this)[0].scrollHeight;t<e&&(t=e)}).height(t)}};j(),S(H()),f.statusHashTemplate&&window&&O(window).on("hashchange",function(){var e=E();-1<e&&_(e)});var A=function(){P&&(clearTimeout(P),P=void 0)},k=function(e){if(e.currentTarget.parentNode===e.delegateTarget){A();var t,a=O(e.currentTarget).index();if(a!==C.currentIndex)t=a,P=setTimeout(function(){_(t)},f.delayTriggerLatency)}},z=function(e){e.currentTarget.parentNode===e.delegateTarget&&(O(e.currentTarget).index()!==C.currentIndex&&A())};f.delayTriggerEvents&&(p&&p.on(f.delayTriggerEvents,"*",k),v&&v.on(f.delayTriggerEvents,"*",k),f.delayTriggerCancelEvents&&(p&&p.on(f.delayTriggerCancelEvents,"*",z),v&&v.on(f.delayTriggerCancelEvents,"*",z)));var B=function(e){if(e.currentTarget.parentNode===e.delegateTarget){A();var t=O(e.currentTarget).index();t!==C.currentIndex&&_(t)}};f.triggerEvents&&(p&&p.on(f.triggerEvents,"*",B),v&&v.on(f.triggerEvents,"*",B));var G={getCount:h,getCurrentIndex:g,getHeaderLabel:L,getFooterLabel:x,getHeaderFooterLabels:$,getPanel:T,updateFixedHeight:j,switchTo:_,addTabItem:function(e,t){F(e,t,C.itemCount),-1===C.currentIndex&&C.itemCount&&_(0)},insertTabItem:function(e,t,a){F(e,t,a),-1===C.currentIndex&&C.itemCount&&_(0)},add:function(e){N(e),-1===C.currentIndex&&C.itemCount&&_(0)},insert:function(e,t){q(e,t),-1===C.currentIndex&&C.itemCount&&_(0)},remove:function(e){if(!(void 0===e||!isFinite(e)||e<0||e>=C.itemCount)){var t=$(e),a=T(e);return t.remove(),a.remove(),C.itemCount--,e<C.currentIndex?w(--C.currentIndex):e===C.currentIndex&&(C.currentIndex===C.itemCount?_(C.currentIndex-1):_(C.currentIndex)),a}}};e.data("tab-controller",G),b.data("tab-controller",G)}}return O.fn.tab=function(a){return this.each(function(e,t){n(O(t),a)}),this},O(".tab-region").tab(),O});
