!function(e,a){"object"==typeof exports&&"undefined"!=typeof module?module.exports=a(require("jquery")):"function"==typeof define&&define.amd?define(["jquery"],a):e["jquery-tab"]=a(e.jQuery)}(this,function(M){"use strict";M=M&&M.hasOwnProperty("default")?M.default:M;var W={triggerEvents:"click",delayTriggerEvents:"",delayTriggerCancelEvents:"",delayTriggerLatency:200,statusFieldSelector:"",statusHashTemplate:"",statusHashSeparator:"&",fixedHeight:!1,mode:"horizontal",activeIndex:0,createEmptyTab:!1,fnShowPanelItem:function(e){return e&&e.show&&e.show()},fnHidePanelItem:function(e){return e&&e.hide&&e.hide()},onBeforeSwitch:void 0,onAfterSwitch:void 0,titleSelector:"h1,h2,h3,h4,h5,h6",fnGetTitleContent:function(e){return e.contents()},keepTitleVisible:!1,tabContainerTemplate:"<div></div>",tabContainerClass:"tab-container",labelContainerTemplate:"<div></div>",labelContainerClass:"label-container",showHeaderLabelContainer:!0,showFooterLabelContainer:!1,labelItemTemplate:"<label></label>",labelItemClass:"label-item",panelContainerTemplate:"<div></div>",panelContainerClass:"panel-container",panelItemTemplate:"<div></div>",panelItemClass:"panel-item"};function y(e){for(var a,t=e;(a=t.children()).length;)t=a;return t.eq(0)}function C(e){var a=M(e.labelContainerTemplate).addClass(e.labelContainerClass).attr("role","tablist");return"vertical"===e.mode&&a.attr("aria-orientation","vertical"),{$labelContainer:a,$labelContainerLeaf:y(a)}}function X(e){var a=M(e.tabContainerTemplate).addClass(e.tabContainerClass);"horizontal"===e.mode?a.addClass(e.horizontalTabContainerClass):"vertical"===e.mode&&a.addClass(e.verticalTabContainerClass);var t=function(e){var a,t;if(e.showHeaderLabelContainer){var n=C(e),r=n.$labelContainer,i=n.$labelContainerLeaf;r.addClass(e.headerLabelContainerClass),a=r,t=i}return{$headerLabelContainer:a,$headerLabelContainerLeaf:t}}(e),n=t.$headerLabelContainer,r=t.$headerLabelContainerLeaf;n&&a.append(n);var i,l,o={$panelContainer:l=M((i=e).panelContainerTemplate).addClass(i.panelContainerClass),$panelContainerLeaf:y(l)},d=o.$panelContainer,s=o.$panelContainerLeaf;a.append(d);var c=function(e){var a,t;if(e.showFooterLabelContainer){var n=C(e),r=n.$labelContainer,i=n.$labelContainerLeaf;r.addClass(e.footerLabelContainerClass),a=r,t=i}return{$footerLabelContainer:a,$footerLabelContainerLeaf:t}}(e),u=c.$footerLabelContainer,f=c.$footerLabelContainerLeaf;return u&&a.append(u),{$tabContainer:a,$headerLabelContainer:n,$headerLabelContainerLeaf:r,$panelContainer:d,$panelContainerLeaf:s,$footerLabelContainer:u,$footerLabelContainerLeaf:f}}function Y(e,a,t,n){var r,i,l,o,d,s,c,u,f=(r=e,l=M((i=n).labelItemTemplate).addClass(i.labelItemClass).addClass(i.inactiveLabelItemClass).attr("role","tab"),(o=y(l)).empty().append(r),{$labelItem:l,$labelItemLeaf:o}),C=f.$labelItem,b=f.$labelItemLeaf,m=(d=a,c=M((s=n).panelItemTemplate).addClass(s.panelItemClass).addClass(s.inactivePanelItemClass).attr("role","tabpanel"),(u=y(c)).append(d),{$panelItem:c,$panelItemLeaf:u}),v=m.$panelItem,p=m.$panelItemLeaf,I=t.containerId,h=t.nextItemId;t.nextItemId++;var g=0,L="__jquery-tab-label__".concat(I,"__").concat(h),x="__jquery-tab-panel__".concat(I,"__").concat(h),$="".concat(L,"__").concat(g),T=x;return C.attr("id",$).attr("aria-controls",x),v.attr("id",T).attr("aria-labelledby",$),{$labelItem:C,$labelItemLeaf:b,$panelItem:v,$panelItemLeaf:p,cloneLabelItem:function(){var e="".concat(L,"__").concat(g++);return e===$?C:C.clone().attr("id",e)}}}var Z=/[.?*+\\\(\)\[\]\{\}]/g;var ee=0;function n(e,a){var t,n,r,i,l,o,d,s,c,u,f,C,b,m,v,p,I=e.data(),h=(t=W,n=I,r=a,i=M.extend({},t,n,r),l=i.tabContainerClass,o=i.labelContainerClass,d=i.labelItemClass,s=i.panelItemClass,M.extend(i,{horizontalTabContainerClass:l+"-horizontal",verticalTabContainerClass:l+"-vertical",headerLabelContainerClass:o+"-header",footerLabelContainerClass:o+"-footer",activeLabelItemClass:d+"-active",inactiveLabelItemClass:d+"-inactive",activePanelItemClass:s+"-active",inactivePanelItemClass:s+"-inactive"})),g={containerId:ee++,nextItemId:0,itemCount:0,currentIndex:-1},L=M.extend({$region:e},X(h)),x=L.$tabContainer,$=L.$headerLabelContainerLeaf,T=L.$panelContainerLeaf,y=L.$footerLabelContainerLeaf,w=(u=g,f=(c=L).$headerLabelContainerLeaf,C=c.$footerLabelContainerLeaf,b=c.$panelContainerLeaf,v=function(e){return f?m(f,e):M([])},p=function(e){return C?m(C,e):M([])},{getCount:function(){return u.itemCount},getCurrentIndex:function(){return u.currentIndex},getLabel:m=function(e,a){if(!isFinite(a))throw new Error("invalid index");return e.children(":eq("+a+")")},getHeaderLabel:v,getFooterLabel:p,getHeaderFooterLabels:function(e){return v(e).add(p(e))},getPanel:function(e){if(!isFinite(e))throw new Error("invalid index");return b.children(":eq("+e+")")}}),H=w.getCount,E=w.getCurrentIndex,P=w.getHeaderLabel,S=w.getFooterLabel,_=w.getHeaderFooterLabels,F=w.getPanel,q=function(e,a,t){var n,r,i=e.$region,l=e.$tabContainer,o=t.statusFieldSelector,d=t.statusHashTemplate,s=t.statusHashSeparator,c=t.fnSaveIndex,u=t.fnLoadIndex,f=t.activeIndex,C=i.find(o);C.length||(C=M(o)),d&&(n=new RegExp(d.replace(Z,"\\$&")+"-?\\d+"),r=new RegExp(d.replace(Z,"\\$&")+"(-?\\d+)"));var b=function(){var e=location.hash.match(r);return e&&e[1]?parseInt(e[1]):-1};return{saveIndex:function(e){if(C.val(e),d){var a=location.hash,t=d+e;-1<a.indexOf(d)?a=a.replace(n,t):(a.length&&(a+=s),a+=t),location.hash=a}c&&c.call(l,e)},loadIndex:function(){var e=a.itemCount,t=-1;return 0===e||(C.each(function(){var e=M(this).val();if("number"==typeof e)return t=e,!1;if(e.length){var a=parseInt(e);if(isFinite(a)&&!isNaN(a))return t=parseInt(e),!1}}),(-1===t||isNaN(t))&&d&&(t=b()),(-1===t||isNaN(t))&&u&&(t=parseInt(u.call(l))),(-1===t||isNaN(t))&&(t=Number(f)||0),t<0?t=0:e<=t&&(t=e-1)),t},parseHashIndex:b}}(L,g,h),N=q.saveIndex,j=q.loadIndex,z=q.parseHashIndex,k=function(e){var a=g.currentIndex;"function"==typeof h.onBeforeSwitch&&h.onBeforeSwitch.call(x,a,e);var t,n,r,i,l,o,d,s=_(e),c=F(e),u=c.siblings();t=s,n=c,i=(r=h).activeLabelItemClass,l=r.inactiveLabelItemClass,o=r.activePanelItemClass,d=r.inactivePanelItemClass,t.removeClass(l).addClass(i).attr("aria-selected","true").attr("aria-expanded","true"),t.siblings().removeClass(i).addClass(l).attr("aria-selected","false").attr("aria-expanded","false"),n.removeClass(d).addClass(o).attr("aria-hidden","false"),n.siblings().removeClass(o).addClass(d).attr("aria-hidden","true"),"function"==typeof h.fnHidePanelItem&&h.fnHidePanelItem.call(u,u),"function"==typeof h.fnShowPanelItem&&h.fnShowPanelItem.call(c,c),g.currentIndex=e,"function"==typeof h.onAfterSwitch&&h.onAfterSwitch.call(x,a,e)},A=function(e){k(e),N(e)},B=function(e,a,t){var n=Y(e,a,g,h),r=n.$panelItem,i=n.cloneLabelItem;-1<g.currentIndex&&"function"==typeof h.fnHidePanelItem&&h.fnHidePanelItem.call(r,r),t<0&&(t=0),0<g.itemCount&&t<g.itemCount?($&&$.children(":eq("+t+")").before(i()),y&&y.children(":eq("+t+")").before(i()),T.children(":eq("+t+")").before(r),t<=g.currentIndex&&N(++g.currentIndex)):($&&$.append(i()),y&&y.append(i()),T.append(r)),g.itemCount++},G=function(e,a){for(var t=M(e),n=0;;){var r=t.find(h.titleSelector).first();if(0===r.length)break;h.keepTitleVisible||r.hide();var i=h.fnGetTitleContent.call(r,r),l=r.add(r.nextUntil(h.titleSelector));B(i,l,a+n),n++}},O=function(e){G(e,g.itemCount)};if(O(e),g.itemCount||h.createEmptyTab){e.append(x);var R,V=function(){if(h.fixedHeight){var a=0;T.children().each(function(){var e=M(this)[0].scrollHeight;a<e&&(a=e)}).height(a)}};V(),k(j()),h.statusHashTemplate&&window&&M(window).on("hashchange",function(){var e=z();-1<e&&A(e)});var Q=function(){R&&(clearTimeout(R),R=void 0)},U=function(e){if(e.currentTarget.parentNode===e.delegateTarget){Q();var a,t=M(e.currentTarget).index();if(t!==g.currentIndex)a=t,R=setTimeout(function(){A(a)},h.delayTriggerLatency)}},D=function(e){e.currentTarget.parentNode===e.delegateTarget&&(M(e.currentTarget).index()!==g.currentIndex&&Q())};h.delayTriggerEvents&&($&&$.on(h.delayTriggerEvents,"*",U),y&&y.on(h.delayTriggerEvents,"*",U),h.delayTriggerCancelEvents&&($&&$.on(h.delayTriggerCancelEvents,"*",D),y&&y.on(h.delayTriggerCancelEvents,"*",D)));var J=function(e){if(e.currentTarget.parentNode===e.delegateTarget){Q();var a=M(e.currentTarget).index();a!==g.currentIndex&&A(a)}};h.triggerEvents&&($&&$.on(h.triggerEvents,"*",J),y&&y.on(h.triggerEvents,"*",J));var K={getCount:H,getCurrentIndex:E,getHeaderLabel:P,getFooterLabel:S,getHeaderFooterLabels:_,getPanel:F,updateFixedHeight:V,switchTo:A,addTabItem:function(e,a){B(e,a,g.itemCount),-1===g.currentIndex&&g.itemCount&&A(0)},insertTabItem:function(e,a,t){B(e,a,t),-1===g.currentIndex&&g.itemCount&&A(0)},add:function(e){O(e),-1===g.currentIndex&&g.itemCount&&A(0)},insert:function(e,a){G(e,a),-1===g.currentIndex&&g.itemCount&&A(0)},remove:function(e){if(!(void 0===e||!isFinite(e)||e<0||e>=g.itemCount)){var a=_(e),t=F(e);return a.remove(),t.remove(),g.itemCount--,e<g.currentIndex?N(--g.currentIndex):e===g.currentIndex&&(g.currentIndex===g.itemCount?A(g.currentIndex-1):A(g.currentIndex)),t}}};e.data("tab-controller",K),x.data("tab-controller",K)}}return M.fn.tab=function(t){return this.each(function(e,a){n(M(a),t)}),this},M(".tab-region").tab(),M});
