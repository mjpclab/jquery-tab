!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("jquery")):"function"==typeof define&&define.amd?define(["jquery"],t):e["jquery-tab"]=t(e.jQuery)}(this,function(R){"use strict";R=R&&R.hasOwnProperty("default")?R["default"]:R;var U={triggerEvents:"click",delayTriggerEvents:"",delayTriggerCancelEvents:"",delayTriggerLatency:200,statusFieldSelector:"",statusHashTemplate:"",statusHashSeparator:"&",fixedHeight:!1,mode:"horizontal",activePosition:0,createEmptyTab:!1,fnShowPanelItem:function(e){return e&&e.show&&e.show()},fnHidePanelItem:function(e){return e&&e.hide&&e.hide()},onBeforeSwitch:undefined,onAfterSwitch:undefined,titleSelector:"h1,h2,h3,h4,h5,h6",fnGetTitleContent:function(e){return e.contents()},keepTitleVisible:!1,fnGetName:function(e){return e.attr("data-tab-item-name")},tabContainerTemplate:"<div></div>",tabContainerClass:"tab-container",labelContainerTemplate:"<div></div>",labelContainerClass:"label-container",showHeaderLabelContainer:!0,showFooterLabelContainer:!1,labelItemTemplate:"<label></label>",labelItemClass:"label-item",panelContainerTemplate:"<div></div>",panelContainerClass:"panel-container",panelItemTemplate:"<div></div>",panelItemClass:"panel-item"};function L(e){for(var t,a=e;(t=a.children()).length;)a=t;return a.eq(0)}function b(e){var t=R(e.labelContainerTemplate).addClass(e.labelContainerClass).attr("role","tablist");return"vertical"===e.mode&&t.attr("aria-orientation","vertical"),{$labelContainer:t,$labelContainerLeaf:L(t)}}function D(e){var t=R(e.tabContainerTemplate).addClass(e.tabContainerClass);"horizontal"===e.mode?t.addClass(e.horizontalTabContainerClass):"vertical"===e.mode&&t.addClass(e.verticalTabContainerClass);var a=function s(e){var t,a;if(e.showHeaderLabelContainer){var n=b(e),r=n.$labelContainer,i=n.$labelContainerLeaf;r.addClass(e.headerLabelContainerClass),t=r,a=i}return{$headerLabelContainer:t,$headerLabelContainerLeaf:a}}(e),n=a.$headerLabelContainer,r=a.$headerLabelContainerLeaf;n&&t.append(n);var i=function f(e){var t=R(e.panelContainerTemplate).addClass(e.panelContainerClass);return{$panelContainer:t,$panelContainerLeaf:L(t)}}(e),o=i.$panelContainer,l=i.$panelContainerLeaf;t.append(o);var d=function C(e){var t,a;if(e.showFooterLabelContainer){var n=b(e),r=n.$labelContainer,i=n.$labelContainerLeaf;r.addClass(e.footerLabelContainerClass),t=r,a=i}return{$footerLabelContainer:t,$footerLabelContainerLeaf:a}}(e),u=d.$footerLabelContainer,c=d.$footerLabelContainerLeaf;return u&&t.append(u),{$tabContainer:t,$headerLabelContainer:n,$headerLabelContainerLeaf:r,$panelContainer:o,$panelContainerLeaf:l,$footerLabelContainer:u,$footerLabelContainerLeaf:c}}var J="#",K=/[.?*+\\\(\)\[\]\{\}]/g;function M(e){return-1!==e&&e!==undefined&&null!==e&&""!==e}function X(e,t,a,n,r){var i=function I(e,t){var a=R(t.labelItemTemplate).addClass(t.labelItemClass).addClass(t.inactiveLabelItemClass).attr("role","tab"),n=L(a);return n.empty().append(e),{$labelItem:a,$labelItemLeaf:n}}(e,r),o=i.$labelItem,l=i.$labelItemLeaf,d=function g(e,t){var a=R(t.panelItemTemplate).addClass(t.panelItemClass).addClass(t.inactivePanelItemClass).attr("role","tabpanel"),n=L(a);return n.append(e),{$panelItem:a,$panelItemLeaf:n}}(t,r),u=d.$panelItem,c=d.$panelItemLeaf;a&&(o.attr("data-tab-item-name",a),u.attr("data-tab-item-name",a));var s=n.containerId,f=n.nextItemId;n.nextItemId++;var C=0,b="__jquery-tab-label__".concat(s,"__").concat(f),m="__jquery-tab-panel__".concat(s,"__").concat(f),v="".concat(b,"__").concat(C),h=m,p=function p(){var e="".concat(b,"__").concat(C++);return e===v?o:o.clone().attr("id",e)};return o.attr("id",v).attr("aria-controls",m),u.attr("id",h).attr("aria-labelledby",v),{$labelItem:o,$labelItemLeaf:l,$panelItem:u,$panelItemLeaf:c,cloneLabelItem:p}}var Y=0;function n(e,t){var a=e.data(),n=function B(e,t,a){var n=R.extend({},e,t,a),r=n.tabContainerClass,i=n.labelContainerClass,o=n.labelItemClass,l=n.panelItemClass;return R.extend(n,{horizontalTabContainerClass:r+"-horizontal",verticalTabContainerClass:r+"-vertical",headerLabelContainerClass:i+"-header",footerLabelContainerClass:i+"-footer",activeLabelItemClass:o+"-active",inactiveLabelItemClass:o+"-inactive",activePanelItemClass:l+"-active",inactivePanelItemClass:l+"-inactive"})}(U,a,t),r={containerId:Y++,nextItemId:0,itemCount:0,currentIndex:-1},i=R.extend({$region:e},D(n)),o=i.$tabContainer,l=function z(e,t){var a=e.$headerLabelContainerLeaf,n=e.$footerLabelContainerLeaf,i=e.$panelContainer,r=e.$panelContainerLeaf,o=function o(n){var r=-1;return i.children().each(function(e,t){var a=R(t);if(a.attr("data-tab-item-name")===n)return r=a.index(),!1}),r},l=function l(e){return"number"==typeof e?e:isFinite(e)?parseInt(e):e?o(e):-1},d=function d(e){if(a){var t=l(e);return a.children(":eq("+t+")")}return R([])},u=function u(e){if(n){var t=l(e);return n.children(":eq("+t+")")}return R([])},c=function c(e){var t=l(e);return d(t).add(u(t))},s=function s(e){var t=l(e);return r.children(":eq("+t+")")},f=function f(){return d(t.currentIndex)},C=function C(){return u(t.currentIndex)},b=function b(){return c(t.currentIndex)},m=function m(){return s(t.currentIndex)},v=function v(e){return s(e).attr("data-tab-item-name")};return{getCount:function h(){return t.itemCount},getCurrentIndex:function p(){return t.currentIndex},getIndexByName:o,PositionToIndex:l,getHeaderLabel:d,getFooterLabel:u,getHeaderFooterLabels:c,getPanel:s,getCurrentHeaderLabel:f,getCurrentFooterLabel:C,getCurrentHeaderFooterLabels:b,getCurrentPanel:m,getName:v}}(i,r),d=l.getCount,u=l.getCurrentIndex,c=l.getIndexByName,s=l.PositionToIndex,f=l.getHeaderLabel,C=l.getFooterLabel,b=l.getHeaderFooterLabels,m=l.getPanel,v=l.getCurrentHeaderLabel,h=l.getCurrentFooterLabel,p=l.getCurrentHeaderFooterLabels,I=l.getCurrentPanel,g=l.getName,L=function k(e,t,a){var n,r=e.$region,i=e.$tabContainer,o=a.statusFieldSelector,l=a.statusHashTemplate,d=a.statusHashSeparator,u=a.fnSavePosition,c=a.fnLoadPosition,s=a.activePosition,f=r.find(o);f.length||(f=R(o)),l&&(n=new RegExp(l.replace(K,"\\$&")+"([-\\w]+)"));var C=function C(){var e=location.hash.match(n);return e&&e[1]?parseInt(e[1]):-1};return{savePosition:function(e){if(f.val(e),l){var t=location.hash,a=l+e;-1<t.indexOf(l)?t=t.replace(n,a):(t!==J&&(t.length?t+=d:t=J),t+=a),location.replace(t)}u&&u.call(i,e)},loadPosition:function b(){var t=-1;return f.each(function(){var e=R(this).val();if("number"==typeof e||e.length)return t=e,!1}),M(t)?t:l&&M(t=C())?t:c&&M(t=c.call(i))?t:M(s)?s:0},parseHashPosition:C}}(i,0,n),T=L.savePosition,$=L.loadPosition,x=L.parseHashPosition,w=function G(d,u,c,t,s,f,C){var b=function b(e){var t=d(e);if(!(t<0||t>=f.itemCount)){var a=f.currentIndex,n=s.$tabContainer;"function"==typeof C.onBeforeSwitch&&C.onBeforeSwitch.call(n,a,t);var r=u(t),i=c(t),o=i.siblings();!function l(e,t,a){var n=a.activeLabelItemClass,r=a.inactiveLabelItemClass,i=a.activePanelItemClass,o=a.inactivePanelItemClass;e.removeClass(r).addClass(n).attr("aria-selected","true").attr("aria-expanded","true"),e.siblings().removeClass(n).addClass(r).attr("aria-selected","false").attr("aria-expanded","false"),t.removeClass(o).addClass(i).attr("aria-hidden","false"),t.siblings().removeClass(i).addClass(o).attr("aria-hidden","true")}(r,i,C),"function"==typeof C.fnHidePanelItem&&C.fnHidePanelItem.call(o,o),"function"==typeof C.fnShowPanelItem&&C.fnShowPanelItem.call(i,i),f.currentIndex=t,"function"==typeof C.onAfterSwitch&&C.onAfterSwitch.call(n,a,t)}},a=function a(e){b(e),t(e)};return{switchToWithoutSave:b,switchTo:a}}(s,b,m,T,i,r,n),y=w.switchToWithoutSave,P=w.switchTo,H=function A(b,r,i,s,o,f,C,m){var v=function v(e,t,a,n){var r=f.$headerLabelContainerLeaf,i=f.$footerLabelContainerLeaf,o=f.$panelContainerLeaf,l=X(e,t,a,C,m),d=l.$panelItem,u=l.cloneLabelItem;-1<C.currentIndex&&"function"==typeof m.fnHidePanelItem&&m.fnHidePanelItem.call(d,d);var c=b(n);c<0&&(c=0),0<C.itemCount&&c<C.itemCount?(r&&r.children(":eq("+c+")").before(u()),i&&i.children(":eq("+c+")").before(u()),o.children(":eq("+c+")").before(d),c<=C.currentIndex&&(C.currentIndex++,s(a||C.currentIndex))):(r&&r.append(u()),i&&i.append(u()),o.append(d)),C.itemCount++},l=function l(e,t,a,n){v(e,t,a,n),-1===C.currentIndex&&C.itemCount&&o(0)},n=function n(e,t,a){v(e,t,a,C.itemCount)},d=function d(e,t,a){n(e,t,a),-1===C.currentIndex&&C.itemCount&&o(0)},h=function h(e,t){for(var a=m.titleSelector,n=m.fnGetTitleContent,r=m.keepTitleVisible,i=m.fnGetName,o=R(e),l=0,d=b(t);;){var u=o.find(a).first();if(0===u.length)break;r||u.hide();var c=u.nextUntil(a),s=n.call(u,u),f=R([]).add(u).add(c),C=i.call(o,u,c);v(s,f,C,d+l),l++}},t=function t(e){h(e,C.itemCount)};return{insertTabItemWithoutSwitch:v,insertTabItem:l,addTabItemWithoutSwitch:n,addTabItem:d,insert:function a(e,t){h(e,t),-1===C.currentIndex&&C.itemCount&&o(0)},insertWithoutSwitch:h,add:function u(e){t(e),-1===C.currentIndex&&C.itemCount&&o(0)},addWithoutSwitch:t,remove:function c(e){var t=b(e);if(!(t<0||t>=C.itemCount)){var a=r(t),n=i(t);return a.remove(),n.remove(),C.itemCount--,t<C.currentIndex?o(C.currentIndex-1):t===C.currentIndex&&(t===C.itemCount?o(C.currentIndex-1):o(C.currentIndex)),n}}}}(s,b,m,T,P,i,r,n),S=H.addTabItem,F=H.insertTabItem,_=H.add,q=H.addWithoutSwitch,N=H.insert,E=H.remove;if(q(e),r.itemCount||n.createEmptyTab){e.append(o);var j=function O(e,t){return function(){if(t.fixedHeight){var n=0;e.$panelContainerLeaf.children().each(function(e,t){var a=t.scrollHeight;n<a&&(n=a)}).height(n)}}}(i,n);j(),y($()),function V(t,a,n,e){e.statusHashTemplate&&window&&R(window).on("hashchange",function(){var e=t();-1<e&&e!==n.currentIndex&&a(e)})}(x,P,r,n),function Q(r,e,i,t){var a,n=t.triggerEvents,o=t.delayTriggerEvents,l=t.delayTriggerCancelEvents,d=t.delayTriggerLatency,u=e.$headerLabelContainerLeaf,c=e.$footerLabelContainerLeaf,s=function s(e){a=setTimeout(function(){r(e),a=undefined},d)},f=function f(){a&&(clearTimeout(a),a=undefined)},C=function C(e){if(e.currentTarget.parentNode===e.delegateTarget){f();var t=R(e.currentTarget),a=t.index();if(a!==i.currentIndex){var n=t.attr("data-tab-item-name");s(n||a)}}},b=function b(e){e.currentTarget.parentNode===e.delegateTarget&&R(e.currentTarget).index()!==i.currentIndex&&f()};o&&(u&&u.on(o,"*",C),c&&c.on(o,"*",C),l&&(u&&u.on(l,"*",b),c&&c.on(l,"*",b)));var m=function m(e){if(e.currentTarget.parentNode===e.delegateTarget){f();var t=R(e.currentTarget),a=t.index();if(a!==i.currentIndex){var n=t.attr("data-tab-item-name");r(n||a)}}};n&&(u&&u.on(n,"*",m),c&&c.on(n,"*",m))}(P,i,r,n);var W={getCount:d,getCurrentIndex:u,getIndexByName:c,getHeaderLabel:f,getFooterLabel:C,getHeaderFooterLabels:b,getPanel:m,getCurrentHeaderLabel:v,getCurrentFooterLabel:h,getCurrentHeaderFooterLabels:p,getCurrentPanel:I,getName:g,updateFixedHeight:j,switchTo:P,addTabItem:S,insertTabItem:F,add:_,insert:N,remove:E};e.data("tab-controller",W),o.data("tab-controller",W)}}return R.fn.tab=function(a){return this.each(function(e,t){n(R(t),a)}),this},function e(){R(".tab-region").tab()}(),R});
