!function(e,a){"object"==typeof exports&&"undefined"!=typeof module?module.exports=a(require("jquery")):"function"==typeof define&&define.amd?define(["jquery"],a):e["jquery-tab"]=a(e.jQuery)}(this,function(R){"use strict";R=R&&R.hasOwnProperty("default")?R["default"]:R;var V={triggerEvents:"click",delayTriggerEvents:"",delayTriggerCancelEvents:"",delayTriggerLatency:200,statusFieldSelector:"",statusHashTemplate:"",statusHashSeparator:"&",fixedHeight:!1,mode:"horizontal",activeIndex:0,createEmptyTab:!1,fnShowPanelItem:function(e){return e&&e.show&&e.show()},fnHidePanelItem:function(e){return e&&e.hide&&e.hide()},onBeforeSwitch:undefined,onAfterSwitch:undefined,titleSelector:"h1,h2,h3,h4,h5,h6",fnGetTitleContent:function(e){return e.contents()},keepTitleVisible:!1,tabContainerTemplate:"<div></div>",tabContainerClass:"tab-container",labelContainerTemplate:"<div></div>",labelContainerClass:"label-container",showHeaderLabelContainer:!0,showFooterLabelContainer:!1,labelItemTemplate:"<label></label>",labelItemClass:"label-item",panelContainerTemplate:"<div></div>",panelContainerClass:"panel-container",panelItemTemplate:"<div></div>",panelItemClass:"panel-item"};function g(e){for(var a,n=e;(a=n.children()).length;)n=a;return n.eq(0)}function b(e){var a=R(e.labelContainerTemplate).addClass(e.labelContainerClass).attr("role","tablist");return"vertical"===e.mode&&a.attr("aria-orientation","vertical"),{$labelContainer:a,$labelContainerLeaf:g(a)}}function Q(e){var a=R(e.tabContainerTemplate).addClass(e.tabContainerClass);"horizontal"===e.mode?a.addClass(e.horizontalTabContainerClass):"vertical"===e.mode&&a.addClass(e.verticalTabContainerClass);var n=function u(e){var a,n;if(e.showHeaderLabelContainer){var t=b(e),r=t.$labelContainer,i=t.$labelContainerLeaf;r.addClass(e.headerLabelContainerClass),a=r,n=i}return{$headerLabelContainer:a,$headerLabelContainerLeaf:n}}(e),t=n.$headerLabelContainer,r=n.$headerLabelContainerLeaf;t&&a.append(t);var i=function f(e){var a=R(e.panelContainerTemplate).addClass(e.panelContainerClass);return{$panelContainer:a,$panelContainerLeaf:g(a)}}(e),l=i.$panelContainer,o=i.$panelContainerLeaf;a.append(l);var d=function C(e){var a,n;if(e.showFooterLabelContainer){var t=b(e),r=t.$labelContainer,i=t.$labelContainerLeaf;r.addClass(e.footerLabelContainerClass),a=r,n=i}return{$footerLabelContainer:a,$footerLabelContainerLeaf:n}}(e),s=d.$footerLabelContainer,c=d.$footerLabelContainerLeaf;return s&&a.append(s),{$tabContainer:a,$headerLabelContainer:t,$headerLabelContainerLeaf:r,$panelContainer:l,$panelContainerLeaf:o,$footerLabelContainer:s,$footerLabelContainerLeaf:c}}function U(e,a,n,t){var r=function I(e,a){var n=R(a.labelItemTemplate).addClass(a.labelItemClass).addClass(a.inactiveLabelItemClass).attr("role","tab"),t=g(n);return t.empty().append(e),{$labelItem:n,$labelItemLeaf:t}}(e,t),i=r.$labelItem,l=r.$labelItemLeaf,o=function h(e,a){var n=R(a.panelItemTemplate).addClass(a.panelItemClass).addClass(a.inactivePanelItemClass).attr("role","tabpanel"),t=g(n);return t.append(e),{$panelItem:n,$panelItemLeaf:t}}(a,t),d=o.$panelItem,s=o.$panelItemLeaf,c=n.containerId,u=n.nextItemId;n.nextItemId++;var f=0,C="__jquery-tab-label__".concat(c,"__").concat(u),b="__jquery-tab-panel__".concat(c,"__").concat(u),v="".concat(C,"__").concat(f),m=b,p=function p(){var e="".concat(C,"__").concat(f++);return e===v?i:i.clone().attr("id",e)};return i.attr("id",v).attr("aria-controls",b),d.attr("id",m).attr("aria-labelledby",v),{$labelItem:i,$labelItemLeaf:l,$panelItem:d,$panelItemLeaf:s,cloneLabelItem:p}}var D="#",J=/[.?*+\\\(\)\[\]\{\}]/g;var K=0;function t(e,a){var n=e.data(),d=function B(e,a,n){var t=R.extend({},e,a,n),r=t.tabContainerClass,i=t.labelContainerClass,l=t.labelItemClass,o=t.panelItemClass;return R.extend(t,{horizontalTabContainerClass:r+"-horizontal",verticalTabContainerClass:r+"-vertical",headerLabelContainerClass:i+"-header",footerLabelContainerClass:i+"-footer",activeLabelItemClass:l+"-active",inactiveLabelItemClass:l+"-inactive",activePanelItemClass:o+"-active",inactivePanelItemClass:o+"-inactive"})}(V,n,a),l={containerId:K++,nextItemId:0,itemCount:0,currentIndex:-1},t=R.extend({$region:e},Q(d)),i=t.$tabContainer,o=t.$headerLabelContainerLeaf,s=t.$panelContainerLeaf,c=t.$footerLabelContainerLeaf,r=function G(e,a){var n=e.$headerLabelContainerLeaf,t=e.$footerLabelContainerLeaf,r=e.$panelContainerLeaf,i=function i(e,a){if(!isFinite(a))throw new Error("invalid index");return e.children(":eq("+a+")")},l=function l(e){return n?i(n,e):R([])},o=function o(e){return t?i(t,e):R([])},d=function d(e){return l(e).add(o(e))};return{getCount:function s(){return a.itemCount},getCurrentIndex:function c(){return a.currentIndex},getLabel:i,getHeaderLabel:l,getFooterLabel:o,getHeaderFooterLabels:d,getPanel:function u(e){if(!isFinite(e))throw new Error("invalid index");return r.children(":eq("+e+")")}}}(t,l),u=r.getCount,f=r.getCurrentIndex,C=(r.getLabel,r.getHeaderLabel),b=r.getFooterLabel,v=r.getHeaderFooterLabels,m=r.getPanel,p=function O(e,a,n){var t,r,i=e.$region,l=e.$tabContainer,o=n.statusFieldSelector,d=n.statusHashTemplate,s=n.statusHashSeparator,c=n.fnSaveIndex,u=n.fnLoadIndex,f=n.activeIndex,C=i.find(o);C.length||(C=R(o)),d&&(t=new RegExp(d.replace(J,"\\$&")+"-?\\d+"),r=new RegExp(d.replace(J,"\\$&")+"(-?\\d+)"));var b=function b(){var e=location.hash.match(r);return e&&e[1]?parseInt(e[1]):-1};return{saveIndex:function v(e){if(C.val(e),d){var a=location.hash,n=d+e;-1<a.indexOf(d)?a=a.replace(t,n):(a!==D&&(a.length?a+=s:a=D),a+=n),location.replace(a)}c&&c.call(l,e)},loadIndex:function m(){var e=a.itemCount,n=-1;return 0===e||(C.each(function(){var e=R(this).val();if("number"==typeof e)return n=e,!1;if(e.length){var a=parseInt(e);if(isFinite(a)&&!isNaN(a))return n=parseInt(e),!1}}),(-1===n||isNaN(n))&&d&&(n=b()),(-1===n||isNaN(n))&&u&&(n=parseInt(u.call(l))),(-1===n||isNaN(n))&&(n=Number(f)||0),n<0?n=0:e<=n&&(n=e-1)),n},parseHashIndex:b}}(t,l,d),I=p.saveIndex,h=p.loadIndex,g=p.parseHashIndex,L=function L(e){var a=l.currentIndex;"function"==typeof d.onBeforeSwitch&&d.onBeforeSwitch.call(i,a,e);var n=v(e),t=m(e),r=t.siblings();!function o(e,a,n){var t=n.activeLabelItemClass,r=n.inactiveLabelItemClass,i=n.activePanelItemClass,l=n.inactivePanelItemClass;e.removeClass(r).addClass(t).attr("aria-selected","true").attr("aria-expanded","true"),e.siblings().removeClass(t).addClass(r).attr("aria-selected","false").attr("aria-expanded","false"),a.removeClass(l).addClass(i).attr("aria-hidden","false"),a.siblings().removeClass(i).addClass(l).attr("aria-hidden","true")}(n,t,d),"function"==typeof d.fnHidePanelItem&&d.fnHidePanelItem.call(r,r),"function"==typeof d.fnShowPanelItem&&d.fnShowPanelItem.call(t,t),l.currentIndex=e,"function"==typeof d.onAfterSwitch&&d.onAfterSwitch.call(i,a,e)},x=function x(e){L(e),I(e)},$=function $(e,a,n){var t=U(e,a,l,d),r=t.$panelItem,i=t.cloneLabelItem;-1<l.currentIndex&&"function"==typeof d.fnHidePanelItem&&d.fnHidePanelItem.call(r,r),n<0&&(n=0),0<l.itemCount&&n<l.itemCount?(o&&o.children(":eq("+n+")").before(i()),c&&c.children(":eq("+n+")").before(i()),s.children(":eq("+n+")").before(r),n<=l.currentIndex&&I(++l.currentIndex)):(o&&o.append(i()),c&&c.append(i()),s.append(r)),l.itemCount++},T=function T(e,a,n){$(e,a,n),-1===l.currentIndex&&l.itemCount&&x(0)},y=function y(e,a){$(e,a,l.itemCount),-1===l.currentIndex&&l.itemCount&&x(0)},w=function w(e,a){for(var n=R(e),t=0;;){var r=n.find(d.titleSelector).first();if(0===r.length)break;d.keepTitleVisible||r.hide();var i=d.fnGetTitleContent.call(r,r),l=r.add(r.nextUntil(d.titleSelector));$(i,l,a+t),t++}},H=function H(e,a){w(e,a),-1===l.currentIndex&&l.itemCount&&x(0)},E=function E(e){w(e,l.itemCount)},P=function P(e){E(e),-1===l.currentIndex&&l.itemCount&&x(0)},S=function S(e){if(!(e===undefined||!isFinite(e)||e<0||e>=l.itemCount)){var a=v(e),n=m(e);return a.remove(),n.remove(),l.itemCount--,e<l.currentIndex?I(--l.currentIndex):e===l.currentIndex&&(l.currentIndex===l.itemCount?x(l.currentIndex-1):x(l.currentIndex)),n}};if(E(e),l.itemCount||d.createEmptyTab){e.append(i);var _,F=function F(){if(d.fixedHeight){var a=0;s.children().each(function(){var e=R(this)[0].scrollHeight;a<e&&(a=e)}).height(a)}};F(),L(h()),d.statusHashTemplate&&window&&R(window).on("hashchange",function(){var e=g();-1<e&&x(e)});var q=function q(e){_=setTimeout(function(){x(e)},d.delayTriggerLatency)},N=function N(){_&&(clearTimeout(_),_=undefined)},j=function j(e){if(e.currentTarget.parentNode===e.delegateTarget){N();var a=R(e.currentTarget).index();a!==l.currentIndex&&q(a)}},z=function z(e){e.currentTarget.parentNode===e.delegateTarget&&(R(e.currentTarget).index()!==l.currentIndex&&N())};d.delayTriggerEvents&&(o&&o.on(d.delayTriggerEvents,"*",j),c&&c.on(d.delayTriggerEvents,"*",j),d.delayTriggerCancelEvents&&(o&&o.on(d.delayTriggerCancelEvents,"*",z),c&&c.on(d.delayTriggerCancelEvents,"*",z)));var k=function k(e){if(e.currentTarget.parentNode===e.delegateTarget){N();var a=R(e.currentTarget).index();a!==l.currentIndex&&x(a)}};d.triggerEvents&&(o&&o.on(d.triggerEvents,"*",k),c&&c.on(d.triggerEvents,"*",k));var A={getCount:u,getCurrentIndex:f,getHeaderLabel:C,getFooterLabel:b,getHeaderFooterLabels:v,getPanel:m,updateFixedHeight:F,switchTo:x,addTabItem:y,insertTabItem:T,add:P,insert:H,remove:S};e.data("tab-controller",A),i.data("tab-controller",A)}}return R.fn.tab=function(n){return this.each(function(e,a){t(R(a),n)}),this},function e(){R(".tab-region").tab()}(),R});
